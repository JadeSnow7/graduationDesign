# 跨端迁移计划与验收表（共享核心 + 统一 SDK + 平台适配）

## 目标与范围
- 目标：共享核心逻辑与统一 API/SDK，UI 根据平台适配
- 范围：Web、iOS、Android、桌面（如有）
- 约束：灰度迁移、不中断业务、可回滚

## 里程碑与周度计划（8 周示例）
> 可按团队规模与模块数量缩放到 6–12 周

### 第 1 周（M0 立项与冻结）
- 明确平台清单与功能矩阵
- 明确冻结窗口与灰度策略
- 输出：迁移评审结论、风险清单

### 第 2 周（M1 基础设施）
- Monorepo + Workspace 规范
- CI/CD、构建、版本与发布策略
- 输出：仓库结构与流水线可跑通

### 第 3 周（M2 统一 SDK）
- 认证、错误码、重试、日志、埋点、缓存
- API 模块划分与接口契约
- 输出：SDK v1.0 + 契约测试

### 第 4 周（M3 共享核心）
- 领域模型、状态管理、公共工具
- 业务流程抽象（如作业/测验）
- 输出：共享核心包 v1.0

### 第 5 周（M4 平台适配层）
- 设计令牌与 UI 适配规范
- 能力封装（文件/相机/通知等）
- 输出：适配层库 + 组件桥接

### 第 6 周（M5 功能迁移 I）
- 迁移低风险模块（资源/公告等）
- 灰度发布与监控
- 输出：首批模块上线

### 第 7 周（M5 功能迁移 II）
- 迁移核心主流程（课程/作业/测验）
- 性能优化与缺陷修复
- 输出：主流程上线

### 第 8 周（M6 验收与回滚）
- 全量验收、回滚演练
- 项目复盘与沉淀
- 输出：验收报告与复盘报告

## 验收表（示例模板）
| 验收项 | 指标 | 方法 | 责任人 | 通过标准 |
|---|---|---|---|---|
| 共享代码覆盖 | 共享逻辑覆盖率 | 代码统计 + 评审 | 架构负责人 | 覆盖率 ≥ 70% |
| API 一致性 | API 契约一致 | 契约测试 | SDK 负责人 | 100% 通过 |
| 鉴权稳定性 | Token 过期与刷新 | 自动化测试 | SDK 负责人 | 0 丢失会话 |
| 错误归一 | 错误码与提示统一 | 端到端测试 | QA | 100% 通过 |
| 性能 | 首屏时间 | 性能监控 | 平台负责人 | 达标或优于基线 |
| 稳定性 | 崩溃率 | 监控平台 | 平台负责人 | ≤ 0.1% |
| 业务主流程 | 课程/作业/测验 | 回归测试 | QA | 100% 通过 |
| 兼容性 | 多平台体验一致 | 人工验收 | 设计/产品 | 体验一致 |
| 回滚可用 | 回滚流程可执行 | 演练 | 研发负责人 | 通过演练 |
| 文档完整 | SDK 与迁移文档 | 文档评审 | 项目经理 | 100% 通过 |

## 交付物清单
- 统一 SDK 包与文档
- 共享核心包与类型定义
- 平台适配层与组件桥接
- CI/CD 与发布规范
- 验收报告与复盘材料
